# 詳説データベース 1章2章

## 読む動機
前回読んだデータ指向アプリケーションデザイン
- 大規模データの分散処理が主な話題
- 網羅的にトピックを扱っている
- アルゴリズムは詳細に立ち入らず、紹介程度になりがち

本書はアルゴリズムや実装部分に重きを置いていそうなので、これを読んでより理解を深めたい（重複している部分もあるが、理解が整理できていない部分も多いのでそれも兼ねて）

### 概要
データベースの基本的な仕組みの説明

Bツリーの基本の説明

### 気になったことメモ
- ワイドカラムストア
  - Bigtable や HBase で採用されているもの
  - 列指向データベースでは列単位で管理されるが、ワイドカラムストアでは列ファミリ単位で管理される
    - [Bigtableのストレージモデル](https://cloud.google.com/bigtable/docs/overview?hl=ja#storage-model)
- 平衡二分木
  - DB の視点から見ると、ファンアウト（子の数）が小さいのが問題になる
    - バランシングのための回転操作が多い
    - 局所性が悪い
      - ページ化二分木を用いると改善するが、より構造が複雑になる上、ノード間のポインタのオーバーヘッドは依然として存在する
    - 木の高さが log オーダーとはいえ、大きい
- ブロックデバイス抽象化
  - OS が SSD や HDD を隠ぺいするもの
  - ブロック単位でデータを取得するので、単一の文字のみを取得することはできない
    - それ用のキャラクタデバイスというものもある
    - https://qiita.com/KenjiOtsuka/items/8f9ee4bc41bf676d64d9
- Bツリー
  - リーフ以外の各ノードにセパレータキーを k 個登録し、それによって k+1 個の子ができる木構造
    - 二分木に比べて木の高さが低い
    - 頻繁に回転操作のようなことを行う必要がないので局所性が高い
  - 挿入や削除により、ノードがオーバーフローまたはアンダーフローしたら水平方向にノードを増やしたり減らしたりする
    - 木の幅や高さは事前に固定されているので、変わらない

